{"ast":null,"code":"var _jsxFileName = \"/Users/kanhaiyasuthar/Desktop/js/Aartas/chatapp/frontend/src/components/Register.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport nacl from 'tweetnacl';\nimport naclUtil from 'tweetnacl-util';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography, TextField, Button, Container, Paper, Grid, Link as MuiLink } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(3)\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    gap: theme.spacing(2),\n    width: '100%'\n  }\n}));\nfunction Register() {\n  _s();\n  const classes = useStyles();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n  const handleRegister = async e => {\n    e.preventDefault();\n\n    // Generate public/private key pair\n    const keyPair = nacl.box.keyPair();\n    const publicKey = naclUtil.encodeBase64(keyPair.publicKey);\n    const privateKey = naclUtil.encodeBase64(keyPair.secretKey);\n\n    // Store the private key in local storage (consider more secure alternatives)\n    localStorage.setItem('privateKey', privateKey);\n    try {\n      // Include publicKey in the registration request\n      const response = await axios.post('http://localhost:3001/api/register', {\n        username,\n        password,\n        publicKey\n      });\n      console.log(response.data);\n      // Handle registration logic (e.g., showing a success message, redirecting to login)\n      navigate(\"/login\");\n    } catch (error) {\n      console.error(\"Registration error\", error.response);\n      alert(\"Something went wrong\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      className: classes.container,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        onSubmit: handleRegister,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          type: \"text\",\n          label: \"Username\",\n          variant: \"outlined\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          fullWidth: true,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          type: \"password\",\n          label: \"Password\",\n          variant: \"outlined\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          fullWidth: true,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          fullWidth: true,\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        justify: \"flex-end\",\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(MuiLink, {\n            component: Link,\n            to: \"/login\",\n            variant: \"body2\",\n            children: \"Already have an account? Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"K3mu8CVCTwcJxqUa5bhiaCAdh74=\", false, function () {\n  return [useStyles, useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","axios","nacl","naclUtil","useNavigate","Link","makeStyles","Typography","TextField","Button","Container","Paper","Grid","MuiLink","jsxDEV","_jsxDEV","useStyles","theme","container","display","flexDirection","alignItems","marginTop","spacing","padding","form","gap","width","Register","_s","classes","username","setUsername","password","setPassword","navigate","handleRegister","e","preventDefault","keyPair","box","publicKey","encodeBase64","privateKey","secretKey","localStorage","setItem","response","post","console","log","data","error","alert","component","maxWidth","children","elevation","className","variant","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","label","value","onChange","target","fullWidth","required","color","justify","item","to","_c","$RefreshReg$"],"sources":["/Users/kanhaiyasuthar/Desktop/js/Aartas/chatapp/frontend/src/components/Register.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport nacl from 'tweetnacl';\nimport naclUtil from 'tweetnacl-util';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography, TextField, Button, Container, Paper, Grid, Link as MuiLink } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(3),\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    gap: theme.spacing(2),\n    width: '100%',\n  },\n}));\n\nfunction Register() {\n  const classes = useStyles();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n\n  const handleRegister = async (e) => {\n    e.preventDefault();\n\n    // Generate public/private key pair\n    const keyPair = nacl.box.keyPair();\n    const publicKey = naclUtil.encodeBase64(keyPair.publicKey);\n    const privateKey = naclUtil.encodeBase64(keyPair.secretKey);\n\n    // Store the private key in local storage (consider more secure alternatives)\n    localStorage.setItem('privateKey', privateKey);\n\n    try {\n      // Include publicKey in the registration request\n      const response = await axios.post('http://localhost:3001/api/register', { username, password, publicKey });\n      console.log(response.data);\n      // Handle registration logic (e.g., showing a success message, redirecting to login)\n      navigate(\"/login\");\n    } catch (error) {\n      console.error(\"Registration error\", error.response);\n      alert(\"Something went wrong\");\n    }\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <Paper elevation={3} className={classes.container}>\n        <Typography variant=\"h4\">Register</Typography>\n        <form className={classes.form} onSubmit={handleRegister}>\n          <TextField\n            type=\"text\"\n            label=\"Username\"\n            variant=\"outlined\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            fullWidth\n            required\n          />\n          <TextField\n            type=\"password\"\n            label=\"Password\"\n            variant=\"outlined\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            fullWidth\n            required\n          />\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            fullWidth\n          >\n            Register\n          </Button>\n        </form>\n        <Grid container justify=\"flex-end\">\n          <Grid item>\n            <MuiLink component={Link} to=\"/login\" variant=\"body2\">\n              Already have an account? Login\n            </MuiLink>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Container>\n  );\n}\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}